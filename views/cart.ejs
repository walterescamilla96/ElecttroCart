<%- include layouts/header.ejs %>

<style>
    .fadeInDown {
  -webkit-animation-name: fadeInDown;
  animation-name: fadeInDown;
  -webkit-animation-duration: 1s;
  animation-duration: 1s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
  }
  @-webkit-keyframes fadeInDown {
  0% {
  opacity: 0;
  -webkit-transform: translate3d(0, -100%, 0);
  transform: translate3d(0, -100%, 0);
  }
  100% {
  opacity: 1;
  -webkit-transform: none;
  transform: none;
  }
  }
  @keyframes fadeInDown {
  0% {
  opacity: 0;
  -webkit-transform: translate3d(0, -100%, 0);
  transform: translate3d(0, -100%, 0);
  }
  100% {
  opacity: 1;
  -webkit-transform: none;
  transform: none;
  }
  } 



  .fadeInLeft {
  -webkit-animation-name: fadeInLeft;
  animation-name: fadeInLeft;
  -webkit-animation-duration: 1s;
  animation-duration: 1s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
  }
  @-webkit-keyframes fadeInLeft {
  0% {
  opacity: 0;
  -webkit-transform: translate3d(-100%, 0, 0);
  transform: translate3d(-100%, 0, 0);
  }
  100% {
  opacity: 1;
  -webkit-transform: none;
  transform: none;
  }
  }
  @keyframes fadeInLeft {
  0% {
  opacity: 0;
  -webkit-transform: translate3d(-100%, 0, 0);
  transform: translate3d(-100%, 0, 0);
  }
  100% {
  opacity: 1;
  -webkit-transform: none;
  transform: none;
  }
  } 
</style>

<div id="all">

        <div id="content">
            <div class="container">

                    

                    <div class="col-md-12" id="basket">
                            <div class="panel panel-default sidebar-menu">
                                <div class="panel-heading" style="background-color: black; color: white;">
                                    <h3 class="panel-title text-center">Bienvenido a su carrito de compras</h3>
                                </div>

                            <div class="panel-body" style="background-color: gray;">

                        <form method="post" action="">

                            <h1 class="fadeInLeft text-center">Carrito de compras</h1>


                            <% if (carrito.length == 0){ %>

                                <p class="fadeInLeft text-center">Usted no cuenta con productos agregados al carrito</p>

                                <% }else{ %>

                                    <% var productos = [];
                                    var precios = [];
                                    %> 

                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th colspan="3" style="background-color: black; color: white;">Producto</th>
                                            <th style="background-color: black; color: white;">Precio</th>
                                            <th style="background-color: black; color: white;">Cantidad</th>
                                            <th style="background-color: black; color: white;">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                            <% for (var i = 0; i < carrito.length; i++) { %>
                                        <tr>
                                            <td><img src="/imagesProductos/<%= carrito[i].imagen %>" alt=""></td>
                                            <td><%= carrito[i].producto %></td>
                                            <td></td>
                                            <td>$ <%= carrito[i].precio %></td>
                                            <td>1</td>
                                            <td>$ <%= carrito[i].precio %></td>
                                            <td><a class="delete btn" style="background-color: black; color: white;"  href="/QuitarDelCarro/<%= carrito[i].productoId %>">
                                                <i class="">Eliminar del carrito</i></a>
                                        </td>
                                        </tr>

                                        <% productos.concat(carrito[i].producto); %>
                                        <% precios.concat(carrito[i].precio); %>

                                        <% } %>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th colspan="5">Total</th>
                                            <th colspan="2">$<%= resTotal[0].total %></th>
                                        </tr>
                                    </tfoot>
                                </table>

                            </div>
                            <!-- /.table-responsive -->

                            <div class="box-footer">
                                <div class="pull-left">
                                    <a href="/Productos" class="btn" style="background-color: black; color: white;"><i class=""></i>Continuar Comprando</a>
                                </div>
                                <div class="pull-right">
                                    <!--<button class="btn btn-default"><i class="fa fa-refresh"></i> Update basket</button>-->
                                    <!--<button type="submit" class="btn btn-primary">Pagar <i class="fa fa-chevron-right"></i>
                                    </button>-->
                                    <a href="/pay/<%= carrito[0].cart %>/<%= resTotal[0].total %>" class="btn" style="background-color: black; color: white;"><i class=""></i>Realizar pago con PayPal</a>
                                </div>
                            </div>

                            <% } %>

                        </form>

                    </div>
                    </div>




                </div>
                </div>
                </div>
                    <!-- /.box -->

                    <%- include layouts/footer.ejs %>